<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta charset="utf-8" />
<title>Presumed Dead</title>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.20.3/TweenMax.min.js"></script>
<script type="text/javascript" src="https://unpkg.com/vue"></script>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script type="text/javascript" src="https://unpkg.com/zircle"></script>
<link href="https://unpkg.com/zircle/dist/zircle.css" rel="stylesheet">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" media="screen" href="zircle.css" />
<link rel="stylesheet" type="text/css" media="screen" href="styles.css" />

</head>

<body>
<div class="container2">
    <div id="app">
    <z-canvas :views='$options.components' style="width: 100%; height: 100%; background : #FFFFFF;">
    </z-canvas>
    </div>
</div>

<script>
    // More zircle-ui at: 
    // https://github.com/zircleUI/zircleUI
    // http://zircle.io
    var demo = {
    angle: 0
    }
    var demo1 = {
    angle1: 0
    }
    const store = {
    debug: true,
    state: {
        ang: 0,
        ang1: 0,
        dist: 0,
        mov: TweenLite.to(demo, 700, {
        angle: 365,
        repeat: -1,
        onUpdate: function() {
            store.state.ang = demo.angle
        }
        }),
        mov1: TweenLite.to(demo1, 700, {
        angle1: 365,
        repeat: -1,
        onUpdate: function() {
            store.state.ang1 = demo1.angle1
        }
        }),
        ecosystem: [{
            name: 'Jacinta',
            icon: 'fa-question',
            viewName: 'help',
            elements: [{
                name: 'Don Rodrigo',
                url: 'docs/DonRodrigo',
                icon: 'fa-comments'
            },
            {
                name: 'Dorotea',
                url: 'docs/Dorotea',
                icon: 'fa-comments'
            },
            {
                name: 'Clara',
                url: 'docs/Clara',
                icon: 'fa-comments'
            },
            ]
        },
        {
            name: 'Clarindo',
            icon: 'fa-edit',
            viewName: 'tooling',
            elements: [{
                name: 'Lisarda',
                url: 'docs/Lisarda',
                icon: 'fa-link'
            },
            {
                name: 'Lisardo',
                url: 'docs/Lisardo',
                icon: 'fa-link'
            },
            {
                name: 'Papagayo',
                url: 'docs/Papagayo',
                icon: 'fa-link'
            }
            ]
        },
        {
            name: 'Don Álvaro',
            icon: 'fa-eye',
            viewName: 'core',
            elements: [{
                name: 'Doña Beatriz',
                url: 'docs/Beatriz',
                icon: 'fa-home'
            },
            {
                name: 'Alberto',
                url: 'docs/Alberto',
                icon: 'fa-home'
            },
            {
                name: 'Hipólita',
                url: 'docs/Hipolita',
                icon: 'fa-home'
            }
            ]
        },
        // {
        //     name: 'Ressources',
        //     icon: 'fa-book',
        //     viewName: 'news',
        //     elements: [{
        //         name: 'Template Prezi',
        //         url: 'https://prezi.com/presentation-template/explanation-clock/',
        //         icon: 'fa-globe'
        //     },
        //     {
        //         name: 'Template Codepen',
        //         url: 'https://codepen.io/zircle/pen/LeqKGK',
        //         icon: 'fa-code'
        //     }
        //     ]
        // }
        ]
    }
    }
    const ecosystem_template = `
        <z-view class="main">

        <span><strong>{{ ecosystem.name }}</strong></span><br>
        <span> Personaje Central </span>

        <section slot="extension">

                <z-spot 
                v-for="(element, index) in ecosystem.elements"
                class="inactive"
                :angle="(360 / ecosystem.elements.length * index) - sharedState.ang1 * 11"
                :distance="130"
                size="medium"
                @mouseover.native="active"
                @touchstart.native="active"
                @mouseout.native="inactive"
                @touchend.native="inactive"
                        @click.native.prevent="this.window.open(element.url, '_blank')"
                :label="element.name"
                :key= "index">

                <i class="fa" :class="element.icon"></i>

                </z-spot>

            </section>

        </z-view>`
    const resources = {
    name: 'resources',
    template: ecosystem_template,
    data() {
        return {
        sharedState: store.state,
        ecosystem: store.state.ecosystem[4]
        }
    },
    methods: {
        active(event) {
        var target = event.target.parentElement
        if (target.classList.contains('inactive')) {
            target.classList.remove('inactive')
            target.classList.add('active')
            this.sharedState.mov1.pause()
        }
        },
        inactive(event) {
        var target = event.target.parentElement
        if (target.classList.contains('active')) {
            target.classList.remove('active')
            target.classList.add('inactive')
            this.sharedState.mov1.play()
        }
        }
    },
    destroyed() {
        this.sharedState.mov.play()
    }
    }
    const news = {
    name: 'news',
    template: ecosystem_template,
    data() {
        return {
        sharedState: store.state,
        ecosystem: store.state.ecosystem[3]
        }
    },
    methods: {
        active(event) {
        var target = event.target.parentElement
        if (target.classList.contains('inactive')) {
            target.classList.remove('inactive')
            target.classList.add('active')
            this.sharedState.mov1.pause()
        }
        },
        inactive(event) {
        var target = event.target.parentElement
        if (target.classList.contains('active')) {
            target.classList.remove('active')
            target.classList.add('inactive')
            this.sharedState.mov1.play()
        }
        }
    },
    destroyed() {
        this.sharedState.mov.play()
    }
    }
    const core = {
    name: 'core',
    template: ecosystem_template,
    data() {
        return {
        sharedState: store.state,
        ecosystem: store.state.ecosystem[2]
        }
    },
    methods: {
        active(event) {
        var target = event.target.parentElement
        if (target.classList.contains('inactive')) {
            target.classList.remove('inactive')
            target.classList.add('active')
            this.sharedState.mov1.pause()
        }
        },
        inactive(event) {
        var target = event.target.parentElement
        if (target.classList.contains('active')) {
            target.classList.remove('active')
            target.classList.add('inactive')
            this.sharedState.mov1.play()
        }
        }
    },
    destroyed() {
        this.sharedState.mov.play()
    }
    }
    const tooling = {
    name: 'tooling',
    template: ecosystem_template,
    data() {
        return {
        sharedState: store.state,
        ecosystem: store.state.ecosystem[1]
        }
    },
    methods: {
        active(event) {
        var target = event.target.parentElement
        if (target.classList.contains('inactive')) {
            target.classList.remove('inactive')
            target.classList.add('active')
            this.sharedState.mov1.pause()
        }
        },
        inactive(event) {
        var target = event.target.parentElement
        if (target.classList.contains('active')) {
            target.classList.remove('active')
            target.classList.add('inactive')
            this.sharedState.mov1.play()
        }
        }
    },
    destroyed() {
        this.sharedState.mov.play()
    }
    }
    const help = {
    name: 'help',
    template: ecosystem_template,
    data() {
        return {
        sharedState: store.state,
        ecosystem: store.state.ecosystem[0]
        }
    },
    methods: {
        active(event) {
        var target = event.target.parentElement
        if (target.classList.contains('inactive')) {
            target.classList.remove('inactive')
            target.classList.add('active')
            this.sharedState.mov1.pause()
        }
        },
        inactive(event) {
        var target = event.target.parentElement
        if (target.classList.contains('active')) {
            target.classList.remove('active')
            target.classList.add('inactive')
            this.sharedState.mov1.play()
        }
        }
    },
    destroyed() {
        this.sharedState.mov.play()
    }
    }
    const home = {
    template: `<z-view class="main">

        <span><img src="https://cdn1.iconfinder.com/data/icons/human-body-parts-1-3/100/a-03-512.png" width="40%" height="60%" /></span><br>
        <span><strong> Presumed Dead </strong></span> 
        <br>
        <span> Ângela de Azevedo </span> 

        <section slot="extension">

            <z-spot 
            v-for="(element, index) in ecosystem"
            class="inactive"
            :angle="(360 / ecosystem.length * index) + sharedState.ang * 5"
            :distance="135"
            size="medium"
            :to-view="element.viewName"
            @mouseover.native="active"
            @touchstart.native="active"
            @mouseout.native="inactive"
            @touchend.native="inactive"
            :label="element.name"
            :key="index">

            <i class="fa" :class="element.icon"></i>

            <section slot="extension">

                <z-spot 
                v-for="(subelement, index) in element.elements"
                style="background-color: #3dbceb; border: none; "
                :angle="(360 / element.elements.length * index) - sharedState.ang1 * 11"
                :distance="132"
                size="xxs"
                :key="index">
                </z-spot>

            </section>

            </z-spot>

        </section>

        </z-view>`,
    data() {
        return {
        sharedState: store.state,
        ecosystem: store.state.ecosystem
        }
    },
    methods: {
        active(event) {
        var target = event.target.parentElement
        if (target.classList.contains('inactive')) {
            target.classList.remove('inactive')
            target.classList.add('active')
            this.sharedState.mov.pause()
        }
        },
        inactive(event) {
        var target = event.target.parentElement
        if (target.classList.contains('active')) {
            target.classList.remove('active')
            target.classList.add('inactive')
            this.sharedState.mov.play()
        }
        }
    },
    updated() {
        var vm = this
        this.$nextTick(function() {
        if (vm.$el.classList.contains('is-previous-view') || vm.$el.classList.contains('is-past-view')) {
            vm.sharedState.mov.pause()
        }
        })
    }
    }
    new Vue({
    el: '#app',
    components: {
        home,
        help,
        tooling,
        resources,
        core,
        news
    },
    mounted() {
        this.$zircle.setView('home')
    }
    })
</script>
</body>